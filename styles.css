:root{
  --bg:#0b1020;--panel:#121a33;--soft:#1b2547;--text:#e9eefc;--muted:#b9c3e6;--accent:#7aa2ff;--accent-2:#35d0a7;--ok:#7bd88f;--warn:#ffb454;--danger:#ff6b6b;
  --topbar-h:56px; --subnav-h:44px; --header-total: calc(var(--topbar-h) + var(--subnav-h));
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:linear-gradient(180deg,#0b1020 0%,#0f1830 100%);color:var(--text)}
img{max-width:100%;height:auto}
a{color:var(--accent)}
.skip{position:absolute;left:-9999px;top:auto}
.skip:focus{left:12px;top:12px;background:#000;color:#fff;padding:8px 12px;border-radius:8px}

/* ===== HEADER 2 étages (tous deux FIXES) ===== */
header{all:unset}
.header{position:relative;display:block}
.topbar{
  position:fixed;top:0;left:0;right:0;height:var(--topbar-h);z-index:1000;
  background:rgba(11,16,32,.92);backdrop-filter:blur(10px);border-bottom:1px solid #1f2a4d
}
.topbar .title{display:flex;gap:12px;align-items:center;height:100%}
.topbar .title h1{margin:0;font-size:clamp(20px,2.5vw,28px)}
.topbar .tagline{margin-left:auto;color:var(--muted);font-size:14px}

.subnav{
  position:fixed;top:var(--topbar-h);left:0;right:0;height:var(--subnav-h);z-index:999;
  background:rgba(11,16,32,.92);backdrop-filter:blur(10px);border-bottom:1px solid #1f2a4d
}
.subnav .navline{display:flex;gap:10px;align-items:center;height:100%}
.subnav a, .subnav .btn.ghost{
  padding:6px 10px;border:1px solid #26335f;border-radius:999px;color:var(--muted);
  text-decoration:none;background:transparent
}
.subnav a:hover, .subnav .btn.ghost:hover{border-color:var(--accent);color:var(--text);background:rgba(122,162,255,.06)}
.subnav a.active{color:var(--text);border-color:var(--accent);background:rgba(122,162,255,.10)}

/* Réserver l’espace total du header */
body{padding-top:var(--header-total)}

.wrap{max-width:1100px;margin:0 auto;padding:24px}
.title{gap:12px;align-items:center}
nav{display:flex;flex-wrap:wrap;gap:12px}

.section{padding:56px 0;border-top:1px solid #1f2a4d}
.section h2{margin:0 0 16px;font-size:clamp(20px,3vw,28px)}
.lead{color:var(--muted);margin-top:0}
.small{font-size:13px;color:var(--muted)}
.center{display:grid;place-items:center}

.grid{display:grid;gap:16px}
.g-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}

.card{background:linear-gradient(180deg,var(--panel),var(--soft));border:1px solid #24315a;border-radius:18px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
.flow>*+*{margin-top:12px}
.btn{border:1px solid #2a3a6b;border-radius:10px;padding:10px 14px;background:#0e1736;color:var(--text);cursor:pointer}
.btn:hover{border-color:var(--accent)}
.btn.small{padding:6px 10px;font-size:13px}
.btn.ghost{background:transparent}
.chip{display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border:1px solid #2a3a6b;border-radius:999px;color:var(--muted);font-size:12px}
.chips{display:flex;flex-wrap:wrap;gap:8px}
.code{background:#0b132f;border:1px solid #273566;color:#dbe5ff;border-radius:12px;padding:12px;overflow:auto}

/* Timeline cards */
.timeline-cards{display:grid;grid-template-columns:repeat(1, minmax(0,1fr));gap:12px}
.tcard{position:relative;padding-left:36px;animation:fade .3s ease}
.tcard::before{content:"";position:absolute;left:6px;top:10px;width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 4px rgba(122,162,255,.15)}
.year{font-weight:700;color:var(--accent-2);margin-right:8px}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* URL explainer */
.url-lab{display:grid;gap:12px}
.url-inputs{display:flex;gap:10px}
.url-inputs input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid #2a3a6b;background:#0d1430;color:var(--text)}
.url-map{display:grid;grid-template-columns:repeat(12,1fr);gap:8px}
.tag{padding:10px 12px;border:1px solid #2a3a6b;border-radius:10px;background:#0e1736;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:transform .1s ease, outline-color .1s}
.tag[data-key]{cursor:pointer}
.tag.active{outline:2px solid var(--accent);box-shadow:0 0 0 6px rgba(122,162,255,.15);transform:scale(1.02)}
.legend{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.legend .item{display:flex;gap:10px;align-items:flex-start}
.dot{width:12px;height:12px;border-radius:50%;margin-top:6px;background:#2a3a6b}
.legend .item[data-key].active .dot{background:var(--accent)}
.didyouknow summary{cursor:pointer}

/* Flashcards */
.flashcards{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
.flash{position:relative;display:grid;place-items:center;height:110px;border:1px solid #2a3a6b;border-radius:14px;background:#f9fafa;cursor:pointer;perspective:800px}
.flash::before{content:attr(data-front);}
.flash.flipped::before{content:attr(data-back)}

/* Accordions */
.acc{border:1px solid #273566;border-radius:12px;padding:12px;background:#0d1633}
.acc>summary{cursor:pointer}

/* Toast */
.toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#0e1736;border:1px solid #2a3a6b;padding:10px 14px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.35)}

/* Ancres : arriver juste sous la sous-nav, sans espace */
section{scroll-margin-top:var(--header-total)}

/* ====== Responsive fixes – bloc "URL : explication visuelle" ====== */

/* Tablet : on casse le placement rigide et on laisse les tags se ranger tout seuls */
@media (max-width: 900px) {
  /* Les tags ne suivent plus les positions en colonnes fixées (inline styles). */
  .url-map .tag { grid-column: auto !important; }

  /* 6 colonnes flexibles au lieu des 12 rigides -> plus d'air pour chaque tag */
  .url-map { grid-template-columns: repeat(6, 1fr); }
}

/* Mobile */
@media (max-width: 600px) {
  /* L’input passe sur toute la ligne, les boutons vont à côté / dessous */
  .url-inputs { flex-wrap: wrap; gap: 8px; }
  .url-inputs input { flex: 1 1 100%; min-width: 100%; }
  .url-inputs .btn { flex: 1 1 48%; min-width: 140px; }

  /* Si trop de chips d’exemples, permettre un petit scroll horizontal discret */
  .chips { overflow-x: auto; padding-bottom: 6px; }

  /* Grille auto-adaptative pour les tags : largeur mini confortable */
  .url-map {
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 8px;
  }
  .url-map .tag {
    grid-column: auto !important;  /* écrase les grid-column inline */
    font-size: 12px;
    padding: 8px 10px;
  }

  /* Légende en une colonne pour éviter l’écrasement du texte */
  .legend { grid-template-columns: 1fr; }

  /* Un peu plus compact en mobile */
  .chip { font-size: 11px; padding: 3px 8px; }
}

/* ===== Fix responsive image – section Domaines & DNS ===== */

/* Autoriser l’enroulement si la place manque, même hors media query */
#domains .card > div[style*="display:flex"] {
  flex-wrap: wrap;
  gap: 16px;
}

/* L’image ne déborde jamais */
#domains .card > div[style*="display:flex"] > :last-child img {
  display: block;
  width: 100%;
  height: auto;
  max-width: 460px; /* taille max confortable */
}

/* Empilage propre et overrides plus forts en mobile/tablette */
@media (max-width: 900px) {
  #domains .card > div[style*="display:flex"] {
    flex-direction: column;
    align-items: center;
  }
  /* Colonne texte : pleine largeur */
  #domains .card > div[style*="display:flex"] > :first-child {
    flex: 1 1 auto !important;   /* override le flex:2 inline */
    width: 100% !important;
  }
  /* Colonne image : enlever min-width inline et centrer */
  #domains .card > div[style*="display:flex"] > :last-child {
    flex: 0 0 auto !important;   /* override le flex:1 inline */
    min-width: 0 !important;     /* override min-width:260px inline */
    width: 100% !important;
    max-width: 460px;
    margin: 12px auto 0;
    text-align: center;
  }
  #domains .card > div[style*="display:flex"] > :last-child img {
    max-width: 100%;
  }
}

/* ==== Fix global pour le split texte + image du bloc "Principe" ==== */
/* Cible le <div style="display:flex; ..."> contenu dans une .card */
.card > div[style*="display:flex"] {
  flex-wrap: wrap;     /* autorise le retour à la ligne si pas assez de place */
  gap: 16px;
}

/* Image jamais trop grande */
.card > div[style*="display:flex"] > :last-child img {
  display: block;
  width: 100%;
  height: auto;
  max-width: 460px;
}

/* --- Empilage sur petits écrans : TEXTE au-dessus, IMAGE en dessous --- */
@media (max-width: 900px) {
  .card > div[style*="display:flex"] {
    flex-direction: column;      /* empile verticalement */
    align-items: center;         /* centre l'image */
  }
  .card > div[style*="display:flex"] > :first-child {
    order: 1;                    /* texte en premier */
    flex: 1 1 auto !important;   /* annule le flex inline */
    width: 100% !important;
  }
  .card > div[style*="display:flex"] > :last-child {
    order: 2;                    /* image en second (en dessous) */
    flex: 0 0 auto !important;   /* annule le flex inline */
    min-width: 0 !important;     /* annule le min-width:260px inline */
    width: 100% !important;
    max-width: 460px;
    margin: 12px auto 0;
    text-align: center;
  }
  .card > div[style*="display:flex"] > :last-child img {
    max-width: 100%;
  }
}
/* === Sous-nav responsive : scroll + snap + dégradés (DESKTOP UNIQUEMENT) === */
@media (min-width: 901px) {
  .subnav {
    overflow: hidden; /* masque les dégradés uniquement en desktop */
  }

  /* La ligne de liens devient une piste scrollable */
  .subnav .navline{
    display: flex;
    align-items: center;
    gap: 10px;
    height: 100%;
    flex-wrap: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity;
    scrollbar-width: none;
  }
  .subnav .navline::-webkit-scrollbar{ display:none; } /* Chrome/Safari */

  /* Chaque lien est un “point d’accroche” pour le snap */
  .subnav a{ 
    flex: 0 0 auto;
    scroll-snap-align: start;
    white-space: nowrap;
  }

  /* Indices visuels (dégradés) pour dire “ça continue…” */
  .subnav::before,
  .subnav::after{
    content:"";
    position:absolute; top:0; bottom:0; width:36px; z-index:1;
    pointer-events:none;
  }
  .subnav::before{
    left:0;
    background: linear-gradient(90deg, rgba(11,16,32,0.95) 35%, rgba(11,16,32,0) 100%);
  }
  .subnav::after{
    right:0;
    background: linear-gradient(270deg, rgba(11,16,32,0.95) 35%, rgba(11,16,32,0) 100%);
  }

  /* Curseur “main” quand on drag-to-scroll */
  .navline.grabbing{ cursor: grabbing; }
  @media (hover:hover){
    .subnav .navline{ cursor: grab; }
  }
}

/* ===== Hamburger nav ===== */
.subnav { position:fixed; top:var(--topbar-h); left:0; right:0; height:var(--subnav-h); z-index:999;
  background:rgba(11,16,32,.92); backdrop-filter:blur(10px); border-bottom:1px solid #1f2a4d; overflow:visible; }
.navwrap { display:flex; align-items:center; gap:10px; height:100%; }

/* Bouton hamburger */
.nav-toggle{ display:none; align-items:center; justify-content:center; width:40px; height:34px;
  border:1px solid #26335f; border-radius:8px; background:#0e1736; color:var(--text); }
.nav-toggle .line{ display:block; width:18px; height:2px; background:var(--muted); margin:2px 0; transition:transform .2s, opacity .2s; }

/* Menu (desktop = inline) */
.navmenu{ display:flex; align-items:center; gap:10px; height:100%; }
.navmenu a{
  padding:6px 10px; border:1px solid #26335f; border-radius:999px; color:var(--muted);
  text-decoration:none; background:transparent; white-space:nowrap;
}
.navmenu a:hover{ border-color:var(--accent); color:var(--text); background:rgba(122,162,255,.06); }
.navmenu a.active{ color:var(--text); border-color:var(--accent); background:rgba(122,162,255,.10); }

/* Mobile : le menu devient un panneau déroulant */
@media (max-width: 900px){
  .nav-toggle{ display:inline-flex; }
  .navmenu{
    position:fixed; left:0; right:0; top:calc(var(--topbar-h) + var(--subnav-h));
    background:rgba(11,16,32,.98); border-bottom:1px solid #1f2a4d;
    display:flex; flex-direction:column; align-items:flex-start;
    gap:10px; padding:14px 16px; max-height:calc(100dvh - var(--header-total)); overflow:auto;
    transform:translateY(-12px); opacity:0; pointer-events:none; transition:transform .18s ease, opacity .18s ease;
  }
  .subnav.open .navmenu{ transform:none; opacity:1; pointer-events:auto; }

  /* Anim burger -> croix */
  .subnav.open .nav-toggle .line:nth-child(1){ transform:translateY(4px) rotate(45deg); }
  .subnav.open .nav-toggle .line:nth-child(2){ opacity:0; }
  .subnav.open .nav-toggle .line:nth-child(3){ transform:translateY(-4px) rotate(-45deg); }
}

/* Empêcher le scroll de fond quand le menu est ouvert */
body.no-scroll{ overflow:hidden; }



/* === Fix hamburger (MOBILE) : panneau au-dessus + liens en colonne === */
@media (max-width: 900px){
  /* Si des dégradés existaient, on les coupe en mobile */
  .subnav::before,
  .subnav::after{ display:none; }

  /* Panneau coulissant : passe au-dessus de tout */
  .navmenu{
    z-index: 1100;
  }

  /* Chaque lien prend toute la largeur du panneau */
  .navmenu a{
    display:block;
    width:100%;
  }
}
/* Bouton "Section suivante" (cohérent sur toutes les pages) */
.next-wrap{
  display:flex;
  justify-content:flex-end;   /* à droite sur desktop */
  margin-top: 20px;
}
.next-wrap .btn.next{
  border-radius: 999px;
  padding: 10px 14px;
  border:1px solid #2a3a6b;
  background:#0e1736;
}

/* Centré en mobile */
@media (max-width: 700px){
  .next-wrap{ justify-content:center; }
}


/* Petite flèche à droite du libellé */
.next-wrap .btn.next::after{
  content: "→";
  transition: transform .15s ease;
  display: inline-block;
}

.next-wrap .btn.next:hover::after{
  transform: translateX(2px);
}

/* Mobile : on centre et on élargit un peu le bouton */
@media (max-width: 600px){
  .next-wrap{
    justify-content: center;
  }
  .next-wrap .btn.next{
    width: 100%;
    max-width: 320px;
    justify-content: center;
  }
}
